{% extends "base.html" %}
{% block content %}
<h1>Modifier l'auteur</h1>

<form method="post">
    {% csrf_token %}
    <div class="form-group form-inline">
        {{ author_form.name.label|add_class:"form-label" }}
        {{ author_form.name|add_class:"form-input" }}
    </div>
    <div class="form-group form-inline">
        {{ author_form.birthdate.label|add_class:"form-label" }}
        {{ author_form.birthdate|add_class:"form-input" }}
    </div>     
    <button class="btn" type="submit">Modifier</button>
    {{ author_form.errors }}
</form>

<h2>Liste des livres</h2>
<form method="post">
    {% csrf_token %}
    <div class="form-group form-inline">
        {{ author_form.name.label|add_class:"form-label" }}
        {{ author_form.name|add_class:"form-input" }}
    </div>
    <div class="form-group form-inline">
        {{ author_form.birthdate.label|add_class:"form-label" }}
        {{ author_form.birthdate|add_class:"form-input" }}
    </div>       
    <button class="btn" type="submit">Ajouter un livre</button>
    {{ book_form.errors }}
</form>

<ul>
    {% for book in author.book_set.all %}
    <li>
        {{ book.title }} <sub>{{ book.published|date:'d.m.Y' }}</sub>
        <form method="post" action="{% url 'delete_book' book.id %}" style="display:inline;">
            {% csrf_token %}
            <button class="btn btn-danger" type="submit">Supprimer</button>
        </form>
    </li>
    {% empty %}
    <li>Aucun livre enregistr√© pour cet auteur</li>
    {% endfor %}
</ul>
{% endblock %}
